---
name: AI Coder Task (General)
about: Define a specific, incremental coding task suitable for an AI Coder agent.
title: 'feat: ProviderRouter (capability + priority-based selection)'
labels: 'status: ready, type: epic-task, priority: high, effort: medium, component: api, architecture, epic: language-model-service-v2'
assignees: ''

---

## 1. Overall Goal / User Story Context

Select the optimal provider (OpenAI or Venice) per request using capabilities and configured priority, with fallback selection.

## 2. Requirements (Mandatory Expectations)

- Respect explicit provider preference when provided
- Filter by required capabilities (tools/stream/strict)
- Order by configured priority and performance signals (future-ready)

## 3. Specific Task Objective

Implement `ProviderRouter` with selection + `GetFallbackProviderAsync` and add unit tests for scenarios.

## 4. Acceptance Criteria

- [ ] Selection works for preferred, capability-filtered, and default cases
- [ ] Fallback provider chosen when primary fails
- [ ] Unit tests cover selection/fallback branches

## 5. Affected Components

- `Code/Zarichney.Server/Services/AI/Router/*`
- `Code/Zarichney.Server.Tests/Services/AI/Router/*`
- `Docs/Specs/epic-246-language-model-service/components/configuration-router.md`

## 6. Relevant Background / Links

- Docs/Specs/epic-246-language-model-service/components/configuration-router.md

---
*Generated by Planning Assistant*

