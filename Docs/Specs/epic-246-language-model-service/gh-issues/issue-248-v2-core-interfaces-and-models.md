---
name: AI Coder Task (General)
about: Define a specific, incremental coding task (feature, fix, refactor) suitable for delegation to an AI Coder agent.
title: 'feat: v2 core interfaces and models'
labels: 'status: ready, type: epic-task, priority: high, effort: medium, component: api, architecture, tech: dotnet, epic: language-model-service-v2'
assignees: ''

---

## 1. Overall Goal / User Story Context

Establish the foundational contracts for LanguageModelService v2 to enable vendor-agnostic AI usage and set the pattern for OpenAI (SDK) and Venice (REST) integrations.

Parent epic: Epic #246 LanguageModelService v2 (OpenAI SDK + Venice REST)

## 2. Requirements (Mandatory Expectations)

- Must define vendor-agnostic interfaces and DTOs with no provider-specific types in signatures
- Must align with Docs/Specs/epic-246-language-model-service/01-architecture-design.md
- Must compile without runtime providers (stub-only is acceptable here)
- CancellationToken must be supported across all async methods

## 3. Specific Task Objective

Create the core v2 contracts and models:
- `ILanguageModelService`
- `IProviderAdapter` (common contract)
- DTOs: `UnifiedChatMessage`, `UnifiedCompletionRequest`, `UnifiedCompletionResponse`, `CompletionOptions`, `ProviderCapabilities`, tool/function types

## 4. Acceptance Criteria

- [ ] All interfaces and DTOs added to `/Code/Zarichney.Server/Services/AI/*`
- [ ] Methods and properties match the spec (architecture-design.md)
- [ ] No provider SDK or HTTP specifics in interfaces/DTOs
- [ ] Unit compilation succeeds; placeholder unit tests validate basic construction/serialization
- [ ] Documentation comments included for public members

## 5. Affected Components

- `Code/Zarichney.Server/Services/AI/Interfaces/*`
- `Code/Zarichney.Server/Services/AI/Models/*`
- `Code/Zarichney.Server.Tests/Services/AI/*`
- `Docs/Specs/epic-246-language-model-service/01-architecture-design.md`

## 6. Relevant Background / Links

- epic: Docs/Specs/epic-246-language-model-service/README.md
- design: Docs/Specs/epic-246-language-model-service/01-architecture-design.md
- standards: Docs/Standards/TaskManagementStandards.md, Docs/Standards/GitHubLabelStandards.md

## 7. (Optional) Implementation Notes / Plan

- Keep DTOs System.Text.Json-friendly; anticipate multi-modal extensions via `Metadata`
- Ensure role normalization handled by separate normalizer (next task)

---
*Generated by Planning Assistant*

